<div class="container">
    <igx-grid #grid [data]="properties | async" width="100%" height="100%" [rowEditable]="true" [primaryKey]="'id'">

        <igx-grid-toolbar>
            <igx-grid-toolbar-actions>
                <button igxButton (click)="addProperty(grid)">Добави имот</button>
            </igx-grid-toolbar-actions>
        </igx-grid-toolbar>

        <igx-column field="type" header="Вид на имота" [sortable]="true">
            <ng-template igxCell let-cell="cell">
                {{ parseType(cell.value) }}
            </ng-template>
            <ng-template igxCellEditor let-cell="cell">
                <igx-select type="border" [(ngModel)]="cell.editValue"
                    style="height: max-content; min-width: min-content;">
                    <igx-select-item [value]="type.value" *ngFor="let type of types">
                        {{type.name}}
                    </igx-select-item>
                </igx-select>
            </ng-template>
        </igx-column>
        <igx-column field="number" header="Номер" [sortable]="true"></igx-column>
        <igx-column field="share" header="Дял в %" dataType="number" [sortable]="true"></igx-column>

        <ng-template igxGridDetail let-dataIem>
            <div class="detail-container">
                <igx-tabs style="height: 100%;">
                    <igx-tab-item>
                        <igx-tab-header>
                            <span igxTabHeaderLabel>Хора</span>
                        </igx-tab-header>
                        <igx-tab-content>
                            <div class="tab-content">
                                <igx-grid #people [data]="dataIem.people" [primaryKey]="'id'" [rowEditable]="true" width="100%" height="100%">
                                    <igx-column width="60px" [editable]="false">
                                        <ng-template igxCell let-cell="cell">
                                            <button igxButton="icon" (click)="startDeletePerson(cell)">
                                                <igx-icon>delete</igx-icon>
                                            </button>
                                        </ng-template>
                                    </igx-column>
                                </igx-grid>
                            </div>
                        </igx-tab-content>
                    </igx-tab-item>
                    <igx-tab-item>
                        <igx-tab-header>
                            <span igxTabHeaderLabel>Автомобили</span>
                        </igx-tab-header>
                        <igx-tab-content>
                        </igx-tab-content>
                    </igx-tab-item>
                    <igx-tab-item>
                        <igx-tab-header>
                            <span igxTabHeaderLabel>Животни</span>
                        </igx-tab-header>
                        <igx-tab-content>
                        </igx-tab-content>
                    </igx-tab-item>
                </igx-tabs>
            </div>
        </ng-template>
    </igx-grid>
</div>
<igx-dialog #deleteDialog><app-delete #delete></app-delete></igx-dialog>
<igx-dialog #addPersonDialog><app-add-person #addPerson></app-add-person></igx-dialog>